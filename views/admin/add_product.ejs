<%- include ('../_layouts/adminheader') -%>
<h2 class="page-title">Add product</h2>
<a href="/admin/products" class="btn btn-primary">Back to all products</a>
<br><br>

<form method="post" action="/admin/products/add-product" enctype="multipart/form-data">
  <div class="form-group">
    <label for="">Title</label>
    <input class="form-control" type="text" name="title" value="<%= title %>" placeholder="Title">
  </div>
  <div class="form-group">
    <label for="">Description</label>
    <textarea class="form-control" name="desc" cols="30" rows="10" placeholder="Content"><%= desc %></textarea>
  </div>

  <div class="form-group">
    <label for="">Category</label>
    <select name="category" class="form-control">
    <% categories.forEach((category)=> { %>
      <option value="<%= category.slug %>"><%= category.title %></option>
    <% }) %>
    </select>
  </div>

  <div class="form-group">
    <label for="">Price</label>
    <input class="form-control" type="text" name="price" value="<%= price %>" placeholder="price">
  </div>

  <div class="form-group">
    <label for="">Image</label>
    <input type="file" name="image" class="form-control" id="img">
    <img src="/images/noimage.png" id="imgPreview" width="100">
  </div>

  <button class="btn btn-primary">Submit</button>
</form>

<script>

  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader()
              
      reader.onload = function(e) {
        $("#imgPreview").attr('src', e.target.result).width(100)
      }
              
      reader.readAsDataURL(input.files[0]);
    }}
    
    $("#img").change(function() {
      readURL(this);
    });


</script>
